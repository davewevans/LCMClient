@using LCMClient.Features.Shared.Models
@using LCMClient.Features.Shared.Repository.Contracts
@using LCMClient.Features.Shared 

@inject IGuardianRepository guardianRepository


<TabContentHeader HeaderText="Orphans"
                  ShowButton="false">
    <div class="text-white">
        <OrphanSVG Width="8" Height="8" />
    </div>
</TabContentHeader>


@if (isLoading)
{
    <LoadingAnimation />
}


<div class="m-6">
    @if (orphans is not null)
    {
        if (orphans.Count == 0)
        {
            <p class="text-lg font-semibold">This guardian has no assigned orphans.</p>
            <p class="text-lg">To assign an orphan to this guardian, select the orphan from the orphan's list, click on "View/Edit," and then click on the "Guardian" tab. From there, you can assign this guardian to the selected orphan.</p>
        }
        else
        {
            <LCMClient.Features.Shared.OrphanCards Orphans="@orphans" />
        }
    }
    else
    {
        <p class="text-lg font-semibold">This guardian has no assigned orphans.</p>
        <p class="text-lg">To assign an orphan to this guardian, select the orphan from the orphan's list, click on "View/Edit," and then click on the "Guardian" tab. From there, you can assign this guardian to the selected orphan.</p>
    }
</div>

@code {

    [Parameter]
    public int Id { get; set; }

    private List<OrphanModel> orphans;

    private bool isLoading = true;

    protected override async Task OnParametersSetAsync()
    {
        orphans = await guardianRepository.GetGuardianOrphansAsync(Id);
        isLoading = false;
    }
}
